# [Day46] 25.07.14 ë°°ìš´ ë‚´ìš© ì •ë¦¬

---

## í¼ ê´€ë¦¬ ê°œë…

### `UnControlled Components`

- Reactê°€ ê°’ì„ ì§ì ‘ ê´€ë¦¬í•˜ì§€ ì•Šê³  DOMì´ ê°’ì„ ìì²´ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ë°©ì‹
- í•„ìš”í•  ë•Œë§Œ `ref`í†µí•´ì„œ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹
- ë¸Œë¼ìš°ì €ì—ê²Œ ë§¡ê¸°ê³  ë‚˜ì¤‘ì— í•„ìš”í•  ë•Œë§Œ ê°€ì ¸ë‹¤ ì“°ëŠ” ë°©ì‹
- ì½”ë“œê°€ ê°„ë‹¨í•˜ê³  ë¦¬ëœë”ë§ì´ ì¤„ì–´ë“¤ì–´ ì„±ëŠ¥ìƒ ìœ ë¦¬í•¨

---

### `Controlled Components`

- Reactì—ì„œ `input`, `textarea`, `select` ë“±ì˜ ê°’ì„ `state`ë¡œ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” ë°©ì‹
- ì‚¬ìš©ìê°€ ê°’ì„ ì…ë ¥í•  ë•Œë§ˆë‹¤ `onChange()`ì´ë²¤íŠ¸ë¡œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ê³  ê·¸ ìƒíƒœê°€ ì»´í¬ë„ŒíŠ¸ì— ë°˜ì˜
- ìƒíƒœê´€ë¦¬, ìœ íš¨ì„± ê²€ì‚¬, ë™ê¸°í™”ê°€ ì‰½ê³  ì¼ê´€ë¨

---

## React Hook Form

> í¼ ìƒíƒœ ê´€ë¦¬ì™€ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ê°„ë‹¨í•˜ê²Œ ì²˜ë¦¬ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
>
> ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ ì¤„ì´ê³  ìµœì†Œí•œì˜ ì½”ë“œë¡œ í¼ì„ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë¨

- ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‹¤ìš´ë¡œë“œ

```bash
npm install react-hook-form
```

---

### React Hook Form & React Form

| êµ¬ë¶„        | React Hook Form                                    | React Forms                                 |
| ----------- | -------------------------------------------------- | ------------------------------------------- |
| ìƒíƒœ ê´€ë¦¬   | Uncontrolled Components ê¸°ë°˜: refë¥¼ í†µí•œ DOM ì ‘ê·¼  | Controlled Components: stateë¥¼ í†µí•œ ê°’ ê´€ë¦¬ |
| ë¦¬ë Œë”ë§    | ìµœì†Œí•œì˜ ë¦¬ë Œë”ë§ (ì…ë ¥ ì‹œ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ ì•ˆë¨) | ì…ë ¥í•  ë•Œë§ˆë‹¤ ë¦¬ë Œë”ë§ ë°œìƒ                 |
| ì„±ëŠ¥        | ë†’ìŒ (ë¦¬ë Œë”ë§ ìµœì†Œí™”)                             | ìƒëŒ€ì ìœ¼ë¡œ ë‚®ìŒ                             |
| ì½”ë“œëŸ‰      | ì ìŒ (ë‚´ì¥ ê¸°ëŠ¥ ë§ìŒ)                              | ë§ìŒ (ìˆ˜ë™ êµ¬í˜„ í•„ìš”)                       |
| ìœ íš¨ì„± ê²€ì‚¬ | ë‚´ì¥ validation ê¸°ëŠ¥ ì œê³µ                          | ì§ì ‘ êµ¬í˜„ í•„ìš”                              |
| ì—ëŸ¬ ì²˜ë¦¬   | ìë™ ì—ëŸ¬ ìƒíƒœ ê´€ë¦¬                                | ìˆ˜ë™ ì—ëŸ¬ ìƒíƒœ ê´€ë¦¬                         |
| ì„¤ì •        | ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ í•„ìš”                               | React ê¸°ë³¸ ê¸°ëŠ¥ë§Œ ì‚¬ìš©                      |

---

#### ì–¸ì œ ì–´ë–¤ê²ƒì„ ì‚¬ìš©?

**React Hook Form ì¶”ì²œ:**

- ë³µì¡í•œ í¼ (ë§ì€ í•„ë“œ, ë³µì¡í•œ ìœ íš¨ì„± ê²€ì‚¬)
- ì„±ëŠ¥ì´ ì¤‘ìš”í•œ ê²½ìš°
- ë¹ ë¥¸ ê°œë°œì´ í•„ìš”í•œ ê²½ìš°

**React Forms (ê¸°ë³¸ ë°©ì‹) ì¶”ì²œ:**

- ê°„ë‹¨í•œ í¼
- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©ì„ í”¼í•˜ê³  ì‹¶ì€ ê²½ìš°
- ì„¸ë°€í•œ ì œì–´ê°€ í•„ìš”í•œ íŠ¹ìˆ˜í•œ ê²½ìš°

---

#### `useState`ë¥¼ ì‚¬ìš©í•œ `Form` ìƒíƒœê´€ë¦¬ë¥¼ ì§„í–‰í•˜ë©´?

- stateê°€ ë„ˆë¬´ ë§ì•„ì§„ë‹¤.
  - ì—¬ëŸ¬ê°€ì§€ í•„ë“œë¥¼ ë” ì…ë ¥ ë°›ì„ ê²½ìš° ë” ë§ì€ ìƒíƒœ(state)ê°€ ë‚˜ì˜¨ë‹¤
- ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ê°ê° ë”°ë¡œ ì‘ì„±ì„ í•´ì•¼í•œë‹¤
- ì¬ì‚¬ìš©ì´ ì–´ë µë‹¤
- ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ì´ ë§ì•„ì ¸ì„œ ì„±ëŠ¥ì´ ë–¨ì–´ì§
- ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì§ì ‘ êµ¬í˜„í•˜ë©´ ì½”ë“œê°€ ì¥í™©í•´ì§€ê³  ìœ ì§€ë³´ìˆ˜ë„ ì–´ë µë‹¤
- ë³µì¡í•œ êµ¬ì¡°ì—ì„œëŠ” ë²„ê·¸ ë°œìƒ í™•ë¥ ì´ ì»¤ì§„ë‹¤

[ì½”ë“œë¡œ ë³´ê¸° click>](./src/components/first-study/useStateEx.jsx)

---

### useForm í›…ì—ì„œ ì œê³µí•˜ëŠ” ì£¼ìš” ê¸°ëŠ¥ë“¤

```js
const {
  register, // inputì„ í¼ì— ë“±ë¡
  handleSubmit, // ì œì¶œ í•¸ë“¤ëŸ¬
  watch, // ì…ë ¥ê°’ ì‹¤ì‹œê°„ ê°ì§€
  reset, // í¼ ë¦¬ì…‹
  setValue, // íŠ¹ì • í•„ë“œ ê°’ ì„¤ì •
  getValues, // í˜„ì¬ ëª¨ë“  ê°’ ê°€ì ¸ì˜¤ê¸°
  trigger, // ìˆ˜ë™ìœ¼ë¡œ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤í–‰
  setError, // ì—ëŸ¬ ìˆ˜ë™ ì„¤ì •
  clearErrors, // ì—ëŸ¬ ì œê±°
  formState: {
    errors, // ì—ëŸ¬ ê°ì²´
    isDirty, // ê°’ì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€
    isValid, // ì „ì²´ ìœ íš¨ì„± í†µê³¼ ì—¬ë¶€
    isSubmitting, // ì œì¶œ ì¤‘ ì—¬ë¶€
    touchedFields, // í¬ì»¤ìŠ¤ í›„ í„°ì¹˜ëœ í•„ë“œ
    dirtyFields, // ë³€ê²½ëœ í•„ë“œ
  },
  control, // Controllerë¥¼ ìœ„í•œ ê°ì²´ (Controlled inputìš©)
} = useForm();
```

---

#### ê²€ì¦í•˜ëŠ” ì†ì„±ë“¤ (Validation Rules)

- `required` - í•„ìˆ˜ ì…ë ¥ ì—¬ë¶€

```js
// ë°©ë²• 1: boolean
register('username', { required: true });

// ë°©ë²• 2: ì»¤ìŠ¤í…€ ì—ëŸ¬ ë©”ì‹œì§€
register('username', { required: 'ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤' });
```

- `minLength` / `maxLength` - ìµœì†Œ/ìµœëŒ€ ê¸¸ì´ ì œí•œ

```js
register('password', {
  minLength: { value: 8, message: '8ì ì´ìƒ ì…ë ¥í•˜ì„¸ìš”' },
  maxLength: { value: 20, message: '20ì ì´í•˜ë¡œ ì…ë ¥í•˜ì„¸ìš”' },
});
```

- `min` / `max` - ìˆ«ìí˜• í•„ë“œì˜ ìµœì†Œ/ìµœëŒ€ê°’

```js
register('password', {
  minLength: { value: 8, message: '8ì ì´ìƒ ì…ë ¥í•˜ì„¸ìš”' },
  maxLength: { value: 20, message: '20ì ì´í•˜ë¡œ ì…ë ¥í•˜ì„¸ìš”' },
});
```

- `pattern` - ì •ê·œí‘œí˜„ì‹ íŒ¨í„´ ë§¤ì¹­

```js
register('email', {
  pattern: {
    value: /^\S+@\S+$/i,
    message: 'ìœ íš¨í•œ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”',
  },
});
```

- `setValueAs` - ê°’ì„ ë“±ë¡í•˜ê¸° ì „ì— íŠ¹ì • í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” ì½œë°±

```js
{
  setValueAs: (v) => v.trim();
}
```

- `disabled` - í•´ë‹¹ í•„ë“œë¥¼ ë¹„ í™œì„±í™” `{disabled : true}`

```js
register('username', { disabled: true });
```

- `validate` - ì»¤ìŠ¤í…€ ê²€ì¦ í•¨ìˆ˜

---

#### `useForm()` ë™ì‘ ìˆœì„œ

```
ğŸ§  useForm() í˜¸ì¶œ
â”‚
â”œâ”€ğŸ”§ ë‚´ë¶€ ìƒíƒœ ê³µê°„ ìƒì„±
â”‚   â”œâ”€ values         â†’ ê° input ê°’ ì €ì¥
â”‚   â”œâ”€ errors         â†’ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨ ì •ë³´
â”‚   â”œâ”€ touchedFields  â†’ ì‚¬ìš©ìê°€ ê±´ë“œë¦° í•„ë“œ ì¶”ì 
â”‚   â””â”€ isValid, isDirty ë“± í¼ ìƒíƒœ ì¶”ì 
â”‚
â”œâ”€ğŸ“Œ register("name", ì˜µì…˜)
â”‚   â””â”€ input ìš”ì†Œì™€ ì—°ê²° (name, onChange, onBlur, ref ìë™ ì„¸íŒ…)
â”‚
â”œâ”€ğŸ–Š ì‚¬ìš©ì ì…ë ¥
â”‚   â””â”€ onChange ë°œìƒ â†’ values ìë™ ì—…ë°ì´íŠ¸
â”‚
â”œâ”€ğŸš¨ ìœ íš¨ì„± ê²€ì‚¬
â”‚   â”œâ”€ onBlur ì‹œ ìë™ ì‹¤í–‰
â”‚   â”œâ”€ ë˜ëŠ” onSubmit ì‹œ ì‹¤í–‰
â”‚   â””â”€ ì‹¤íŒ¨í•˜ë©´ â†’ errors[name]ì— ë©”ì‹œì§€ ì €ì¥
â”‚
â”œâ”€ğŸ“¨ handleSubmit(onSubmit)
â”‚   â”œâ”€ ìœ íš¨ì„± ê²€ì‚¬ í†µê³¼ â†’ onSubmit(data) ì‹¤í–‰
â”‚   â””â”€ ì‹¤íŒ¨ â†’ errors ìƒíƒœë¡œ ìœ ì§€
â”‚
â””â”€ğŸ“¦ formState.errors
    â””â”€ ì»´í¬ë„ŒíŠ¸ì— ì—ëŸ¬ ë©”ì‹œì§€ë¡œ í‘œì‹œ
```

#### UI íë¦„

1. useForm() í˜¸ì¶œ
   â†“
2. `register("email")`
   â†“
3. `<input {...register("email")} />` â† ì—°ê²° ì™„ë£Œ
   â†“
4. ì‚¬ìš©ì ì…ë ¥ (ì´ë©”ì¼ íƒ€ì´í•‘)
   â†“
5. ê°’ ìë™ ì¶”ì  (`values.email = "ì…ë ¥ëœ ê°’"`)
   â†“
6. `blur` ë˜ëŠ” `submit` ë°œìƒ
   â†“
7. ìœ íš¨ì„± ê²€ì‚¬
   - ì‹¤íŒ¨ â†’ `errors.email = { message: "ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤" }`
   - ì„±ê³µ â†’ `onSubmit(data)` ì‹¤í–‰

---

#### ì‚¬ìš© ì˜ˆì‹œ

```jsx
export default function TestUseForm() {
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm();
  const onSubmit = (data) => console.log(data);

  return (
    <div>
      <h3>ì˜ˆì™¸ ì²˜ë¦¬</h3>
      <form onSubmit={handleSubmit(onSubmit)}>
        {/* ì•„ì´ë”” ì…ë ¥ */}
        <lable>
          <span>ì•„ì´ë””ì…ë ¥:</span>
          <input
            type='text'
            {...register('username', {
              required: 'ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”.',
              minLength: { value: 4, message: 'ìµœì†Œ 4ê¸€ì' },
              maxLength: { value: 12, message: 'ìµœëŒ€ 12ê¸€ì' },
              pattern: { value: /^[a-zA-Z0-9]+$/, message: 'ì˜ë¬¸/ìˆ«ìë§Œ' },
            })}
          />
          {errors.username && <span>{errors.username.message}</span>}
        </lable>
      </form>
    </div>
  );
}
```

---
