# [Day51] 25.07.21 배운내용 정리

---

# React 테스트

## 📝 React 테스트란?

> React 테스트는 개발한 리액트 컴포넌트나 기능들이 제대로 동작하는지 **자동으로 확인**하는 과정
>
> > - 사용자가 버튼을 클릭했을 때 화면이 바뀌는지
> >
> > - 데이터가 저장되는지
> >
> > - 기타 원하는 동작들이 정상적으로 작동하는지
>
> 이러한 과정을 검증해주는 과정

## 🤔 왜 테스트를 하게 되었나?

### 수동 테스트의 한계

- 사람이 직접 브라우저에서 모든 기능을 하나하나 확인하기에는
  - **시간이 오래 걸림**
  - **실수가 잦음**

### 협업과 유지보수의 어려움

- 팀 프로젝트나 유지보수가 많은 경우
  - 누군가 코드를 바꾸면 어디가 잘못되었는지 모르고 배포될 수 있음

## 🛠️ 테스트 라이브러리

### 주요 테스트 도구들

- **RTL (React Testing Library)**: 리액트에서 가장 많이 사용되는 표준 테스트 도구
- **Jest**: 테스트 실행을 위한 기본 도구
- **MSW (Mock Service Worker)**: API 응답을 가짜로 만들어 테스팅하는 도구

## 📊 테스트 종류

### 1. 유닛(Unit) 테스트

- **특징**: 가장 작은 단위의 로직 테스트 (함수, 컴포넌트 등을 독립적으로)
- **장점**: 빠르고 명확한 로직 검증
- **예시**: 버튼 클릭 시 1 증가

### 2. 통합(Integration) 테스트

- **특징**: 여러 유닛이 함께 작동하는 흐름을 테스트
- **목적**: 여러 기능이 함께 작동할 때 연결이 잘 되는지 확인
- **예시**: 로그인 시 토큰 저장 / 화면 이동

### 3. 엔드투엔드(End-to-End, E2E) 테스트

- **특징**: 전체 시스템의 흐름을 확인하고 문제를 감지하는 테스트
- **목적**: 시스템이 전체적으로 비즈니스 목표에 달성하는지 확인
- **예시**: 개발이 끝날 무렵 전체적으로 테스트 진행

## 📦 필수 라이브러리 설치

```bash
npm install --save-dev jest @testing-library/react @testing-library/jest-dom
```

### 각 라이브러리 역할

| 라이브러리                  | 역할                                                         |
| --------------------------- | ------------------------------------------------------------ |
| `jest`                      | 테스트를 실행하는 기본 도구                                  |
| `@testing-library/react`    | 리액트 컴포넌트를 테스트할 수 있는 도구                      |
| `@testing-library/jest-dom` | DOM 요소에 직관적인 matcher를 추가해주는 유틸리티 라이브러리 |

### @testing-library/jest-dom의 활용

유저 관점에서 다음과 같은 것들을 테스트할 때 사용:

- 요소의 상태, 내용, 속성
- 클래스, 포커스 여부 등
- `expect()` 문과 함께 사용

## ⚡ Vite 프로젝트에서의 테스트

- **Vite 프로젝트**: `vitest` 사용
- **추가 설정**: `vite.config.js` 파일 수정 필요

---

## ⚒️ 단위 테스트 코드 예시

### 예시 1: 기본 렌더링 테스트

#### [컴포넌트 코드](./Day51-REACT/src/components/RTL/Hello.jsx)

#### [테스트 코드](./Day51-REACT/src/components/RTL/Hello.test.jsx)

---

### 예시 2: 사용자 이벤트 테스트

#### [컴포넌트 코드](./Day51-REACT/src/components/RTL/InputBox.jsx)

#### [테스트 코드](./Day51-REACT/src/components/RTL/InputBox.test.jsx)

---

### 🔍 테스트 패턴 분석

#### 기본 테스트 단계

1. **Arrange (준비)**: 컴포넌트 렌더링
2. **Act (실행)**: 사용자 액션 시뮬레이션
3. **Assert (검증)**: 결과 확인

#### 주요 함수들

| 함수                            | 역할                         |
| ------------------------------- | ---------------------------- |
| `render()`                      | 컴포넌트를 가상 DOM에 렌더링 |
| `screen.getByText()`            | 텍스트로 요소 찾기           |
| `screen.getByPlaceholderText()` | placeholder로 요소 찾기      |
| `fireEvent.change()`            | 입력 이벤트 시뮬레이션       |
| `toBeInTheDocument()`           | 요소가 DOM에 존재하는지 확인 |

---

## ⚒️ 통합 테스트 코드 예시

### 예시 : React Hook Form과 Zustand 상태관리를 함께 사용하는 사용자 등록 폼 테스트

#### [컴포넌트 코드](./Day51-REACT/src/components/user/UserForm.jsx)

#### [테스트 코드](./Day51-REACT/src/components/user/UserFlow.test.jsx)

---

### 🔍 통합 테스트 특징

이 예시는 여러 라이브러리와 컴포넌트가 함께 작동하는 **통합 테스트**입니다:

- **React Hook Form**: 폼 상태 관리 및 유효성 검사
- **Zustand**: 전역 상태 관리
- **컴포넌트 간 상호작용**: UserForm과 UserDisplay 컴포넌트 연동
- **비동기 처리**: 상태 업데이트 후 UI 반영 확인

### 📝 테스트에서 확인하는 요소들

1. **사용자 입력** → **폼 제출** → **상태 저장** → **화면 반영**의 전체 흐름
2. `describe()` 그룹을 통한 관련 테스트들의 체계적 관리
3. `waitFor()`를 사용한 비동기 상태 변화 대기
4. 여러 컴포넌트가 동시에 렌더링되어 상호작용하는 시나리오

코드를 보고 주석 부분을 채워드릴게요!

## ⚒️ 통합 테스트 코드 예시

### 예시 : React Hook Form과 Zustand 상태관리를 함께 사용하는 사용자 등록 폼 테스트

#### [컴포넌트 코드](./Day51-REACT/src/components/user/UserForm.jsx)

#### [테스트 코드](./Day51-REACT/src/components/user/UserForm.test.jsx)

---

### 🔍 통합 테스트 특징

이 예시는 여러 라이브러리와 컴포넌트가 함께 작동하는 **통합 테스트**입니다:

- **React Hook Form**: 폼 상태 관리 및 유효성 검사
- **Zustand**: 전역 상태 관리
- **컴포넌트 간 상호작용**: UserForm과 UserDisplay 컴포넌트 연동
- **비동기 처리**: 상태 업데이트 후 UI 반영 확인

### 📝 테스트에서 확인하는 요소들

1. **사용자 입력** → **폼 제출** → **상태 저장** → **화면 반영**의 전체 흐름
2. `describe()` 그룹을 통한 관련 테스트들의 체계적 관리
3. `waitFor()`를 사용한 비동기 상태 변화 대기
4. 여러 컴포넌트가 동시에 렌더링되어 상호작용하는 시나리오

---

### 🆚 단위 테스트 vs 통합 테스트 비교

| 구분          | 단위 테스트              | 통합 테스트                     |
| ------------- | ------------------------ | ------------------------------- |
| **범위**      | 하나의 컴포넌트/함수     | 여러 컴포넌트/라이브러리        |
| **검증 내용** | 개별 기능 동작           | 전체 워크플로우                 |
| **예시**      | 버튼 클릭 시 텍스트 변경 | 폼 입력 → 상태 저장 → 화면 반영 |
