# [Day63] 25.08.13 오늘 배운 내용 정리

---

## 🍪 쿠키(Cookie)란?

> 브라우저와 서버가 데이터를 주고 받을 때 브라우저에 저장되는 작은 텍스트 데이터
>
> > - 보통 로그인 세션 유지, 인증정보 저장, 사용자 설정에 사용

---

## 쿠키의 특징

### 1. 브라우저에 저장됨

- 사용자가 페이지를 이동하거나 새로고침을 해도 유지가능

### 2. 자동 전송

- 해당 도메인에 요청을 보낼 때마다 브라우저가 자동으로 함께 전송

### 3. 유효기간 설정 가능

- expires / max-age 옵션으로 설정

### 4. 양방향 접근

- 클라이언트(js)와 서버(node) 양쪽에서 읽고 쓸 수 있다

---

## 실습 라이브러리 설치

```
npm install cookies-next
```

_실무에서도 자주 사용하는 간단하고 편리한 쿠키 관리 라이브러리_

---

## 쿠키 사용법

### 기본 문법

```
// 저장
setCookie(name, value, options);

// 읽기 => 요청과 응답을 객체형식으로 보내줌
getCookie('가져올 쿠키 이름' );
getCookie('가져올 쿠키 이름', option);

// 삭제
deleteCookie('삭제할 쿠키의 이름');
```

### 옵션 설정

```
const name = "쿠키이름";
const value = "저장할 값 (문자열 또는 json가능)";
const options = {
  maxAge: 60 * 5,     // 유효기간을 초단위로 설정 (5분)
  path: '/',          // 기본값: 루트 경로
  secure: true,       // HTTPS 전용
  httpOnly: true      // 서버에서만 접근 가능
}
```

---

## `getServerSideProps` 함수

### 기능

- Next.js에서 제공하는 기본적인 서버사이드 데이터 패칭 함수
- 페이지가 브라우저에서 열리기 전에 서버에서 먼저 실행
- 쿠키나 DB 데이터를 가져와서 props로 페이지 컴포넌트에 전달

### 특징

- 페이지 요청이 있을 때마다 서버에서 실행
- 반환된 데이터는 props로 전달
- 서버에서 데이터를 미리 받아 HTML을 완성해서 전송 → **초기 로딩 속도 개선**

---

## 중요한 보안 고려사항

### 1. SSR에서의 쿠키 접근

- 서버사이드 렌더링에서는 **반드시 요청(req)과 응답(res)** 객체를 전달해야 쿠키 접근 가능

### 2. httpOnly 제한

- 브라우저 환경에서는 httpOnly 옵션 사용 불가능
- **민감한 토큰은 서버에서 설정**하는 것이 안전

### 3. 인증 토큰 보안

- 인증토큰 저장 시 **`secure: true`** + HTTPS 환경 권장
- 중요한 정보는 클라이언트에서 직접 접근할 수 없도록 설정

### 4. 데이터 패칭(Data Fetching)

- 외부 데이터 소스(서버, API 데이터베이스 등)로 부터 데이터를 가져오는 과정
